@BASE = http://localhost:8080
# 로그인 후 받은 JWT 토큰으로 교체하세요
@TOKEN = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjbWk4aXVoZjcwMDAwbmdrajd5dWM2M3o5IiwiZW1haWwiOiJ0ZXN0ZXJAZXhhbXBsZS5jb20iLCJpYXQiOjE3NjM3MDkwNzYsImV4cCI6MTc2NDMxMzg3Nn0.oQuczq4fZpel_bynp89LyU3XGY63eAp-vwpJsKamtdw
# Prisma Studio 등에서 확인한 Room ID 로 교체하세요
@ROOM_ID = <room_cuid_here>

### 회원가입 (로컬)
POST {{BASE}}/api/auth/signup
Content-Type: application/json

{
  "email": "tester@example.com",
  "password": "Passw0rd!",
  "nickname": "테스터"
}

### 로그인 (로컬)
POST {{BASE}}/api/auth/login
Content-Type: application/json

{
  "email": "tester@example.com",
  "password": "Passw0rd!"
}

### 내 정보 확인
GET {{BASE}}/api/me
Authorization: Bearer {{TOKEN}}

### 지갑 잔액 조회
GET {{BASE}}/api/wallet/balance
Authorization: Bearer {{TOKEN}}

### 지갑 충전 (topup)
POST {{BASE}}/api/wallet/topup
Content-Type: application/json
Authorization: Bearer {{TOKEN}}

{
  "amount": 50000
}

### 방 배차 시 예치금 홀드 (1/n)
POST {{BASE}}/api/settlements/rooms/{{ROOM_ID}}/hold
Authorization: Bearer {{TOKEN}}

### 하차 시 최종 정산 (실요금 입력)
POST {{BASE}}/api/settlements/rooms/{{ROOM_ID}}/finalize
Content-Type: application/json
Authorization: Bearer {{TOKEN}}

{
  "actualFare": 62000
}

### 목업 결제 내역 조회
GET {{BASE}}/api/payments/mock
Authorization: Bearer {{TOKEN}}

### 목업 결제 강제 생성 (테스트용)
POST {{BASE}}/api/payments/mock/charge
Content-Type: application/json
Authorization: Bearer {{TOKEN}}

{
  "amount": 30000,
  "currency": "KRW",
  "metadata": {
    "note": "manual-test"
  }
}

### 1. 방 생성 (로컬)
### - JWT는 위에서 로그인 해서 직접 복사해 넣기 (@JWT 갱신 필수!)
POST {{BASE}}/api/rooms
Authorization: Bearer {{TOKEN}}
Content-Type: application/json

{
  "title": "전북대 → 시외버스터미널",
  "departureLabel": "전북대 구정문",
  "departureLat": 35.846100,
  "departureLng": 127.129100,
  "arrivalLabel": "전주 시외버스터미널",
  "arrivalLat": 35.825000,
  "arrivalLng": 127.148000,
  "departureTime": "2025-11-20T15:30:00.000Z",
  "capacity": 4,
  "priority": "time",
  "estimatedFare": 12000
}
